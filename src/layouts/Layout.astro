---
import DarkModeToggle from "../components/DarkModeToggle.astro";
import KeyboardIcon from "../components/ui/keyboard.tsx";
interface Props {
  title: string;
}
const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body>
    <div class="header">
      <a href="/">eKeyNox</a>
      <div class="actions"><div class="keyboard">
        <KeyboardIcon />
      </div>
      <div class="toggle">
        <DarkModeToggle />
      </div></div>
          
    </div>
    <div class="sidebar"></div>
    <slot />
    <div class="footer"></div>
  </body>
</html>

<script>
  const theme =
    (() => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })() || "";

  const themeToggle = document
    .querySelector('.theme__toggle') as HTMLInputElement;

  if (theme === "light") {
    document.documentElement.classList.remove("dark");
    themeToggle!.checked = false;
  } else {
    document.documentElement.classList.add("dark");
    themeToggle!.checked = true;
  }

  window.localStorage.setItem("theme", theme);

  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };


    themeToggle?.addEventListener("click", handleToggleClick);
</script>

<style is:global>
  .toggle {
    position: relative;
  }
  :root {
    --background-color: #e0e0e0;
    --text-color: rgb(0, 31, 63);
    --text-secondary-color: grey;

    --correct-color: green;
    --correct-bg-color: lightgreen;
    --incorrect-color: red;
    --incorrect-bg-color: lightcoral;
    --corrected-color: orange;
    --corrected-bg-color: lightyellow;
    --focus-color: blue;
    --focus-bg-color: lightblue;

    --test-red: #fe9c9b;
    --test-orange: #fed79c;
    --test-green: #61d4bc;

    --test-light-red: #efafaf;
    --test-light-orange: #f9e2c2;
    --test-light-green: #90dfcc;

    --key-color: #bebebe;
    --key-color-alt: #ffffff;

    --key-correct-bg-color: #8ff0a4;
    --key-correct-color: #7acc8b;
    --key-correct-color-alt: #a4ffbd;

    --key-incorrect-bg-color: #f66151;
    --key-incorrect-color: #d15245;
    --key-incorrect-color-alt: #ff705d;

    --key-corrected-bg-color: #ffbe6f;
    --key-corrected-color: #d9a25e;
    --key-corrected-color-alt: #ffdb80;

    --key-focus-bg-color: #99c1f1;
    --key-focus-color: #82a4cd;
    --key-focus-color-alt: #b0deff;
  }
  .dark {
    --background-color: #2a2d2f;
    --text-color: #f6f5f7;
    --text-secondary-color: grey;

    --correct-color: green;
    --correct-bg-color: lightgreen;
    --incorrect-color: red;
    --incorrect-bg-color: lightcoral;
    --corrected-color: orange;
    --corrected-bg-color: lightyellow;
    --focus-color: blue;
    --focus-bg-color: lightblue;

    --key-color: #242628;
    --key-color-alt: #303436;

    --key-correct-bg-color: #126033;
    --key-correct-color: #0f522b;
    --key-correct-color-alt: #156e3b;

    --key-incorrect-bg-color: #81180d;
    --key-incorrect-color: #6e140b;
    --key-incorrect-color-alt: #941c0f;

    --key-corrected-bg-color: #744307;
    --key-corrected-color: #633906;
    --key-corrected-color-alt: #854d08;

    --key-focus-bg-color: #12345c;
    --key-focus-color: #0f2c4e;
    --key-focus-color-alt: #153c6a;
  }

  html {
    font-family: system-ui, sans-serif;
    background-size: 224px;
    padding: 0;
    m
  }
  .header {
    display: flex;
    padding: 1rem;
    justify-content: space-evenly;
  }
  body {
    display: grid;
    margin: 0;
    background-color: var(--background-color);
  }
  a {
    color: #000;
    text-decoration: none;
    a:hover {
      text-decoration: underline;
    }
  }

  h1, h2, h3, a, p, span {
    color: var(--text-color);
  }

  .actions {
    display: flex;
    width: 100px;
    align-items: center;
    justify-content: space-between;
  }
  .keyboard {
    cursor: pointer;
  } 
  .keyboard path {
      fill: var(--text-secondary-color);
    }
  .keyboard:hover path {
    fill: var(--text-color);
  }
  
</style>
